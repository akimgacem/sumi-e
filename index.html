<!DOCTYPE html>
<html>
  <head>
    <title>Sumi-e</title>
    <meta charset="utf-8">
  </head>

  <body>
    <canvas id="canvas" width="512" height="512">
    </canvas>

    <script type="text/javascript" src="noise.js">
    </script>

    <script type="text/javascript" src="paint.js">
    </script>

    <script type="text/javascript">
      (function() {
        "use strict"
        var c, canvas, ctx, id, r, t, viscosity;

        c = 0.551915024494;
        viscosity = 0.03125;

        canvas = document.getElementById("canvas");
        ctx    = canvas.getContext("2d");
        id     = ctx.getImageData(0, 0, canvas.width, canvas.height);

        r = Math.min(id.width, id.height) / 3.0;

        t = 0.0;

        t = bezier(
          id,
          t, viscosity,
          0.5 * id.width + r    , 0.5 * id.height        , 0.25 * r,
          0.5 * id.width + r    , 0.5 * id.height - c * r, 0.25 * r,
          0.5 * id.width + c * r, 0.5 * id.height - r    , 0.20 * r,
          0.5 * id.width        , 0.5 * id.height - r    , 0.20 * r
        );

        t = bezier(
          id,
          t, viscosity,
          0.5 * id.width        , 0.5 * id.height - r    , 0.20 * r,
          0.5 * id.width - c * r, 0.5 * id.height - r    , 0.20 * r,
          0.5 * id.width - r    , 0.5 * id.height - c * r, 0.16 * r,
          0.5 * id.width - r    , 0.5 * id.height        , 0.16 * r
        );

        t = bezier(
          id,
          t, viscosity,
          0.5 * id.width - r    , 0.5 * id.height        , 0.16 * r,
          0.5 * id.width - r    , 0.5 * id.height + c * r, 0.16 * r,
          0.5 * id.width - c * r, 0.5 * id.height + r    , 0.11 * r,
          0.5 * id.width        , 0.5 * id.height + r    , 0.11 * r
        );

        t = bezier(
          id,
          t, viscosity,
          0.5 * id.width        , 0.5 * id.height + r    , 0.11 * r,
          0.5 * id.width + c * r, 0.5 * id.height + r    , 0.11 * r,
          0.5 * id.width + r    , 0.5 * id.height + c * r, 0.06 * r,
          0.5 * id.width + r    , 0.5 * id.height        , 0.06 * r
        );

        ctx.putImageData(id, 0, 0);
      })();
    </script>
  </body>
</html>
