<!DOCTYPE html>
<html>
  <head>
    <title>Sumi-e</title>
  </head>

  <body>
    <canvas id="canvas" width="512" height="512">
    </canvas>

    <script type="text/javascript" src="paint.js">
    </script>

    <script type="text/javascript">
      (function() {
        "use strict"
        var canvas, ctx, i, id, n, r, t, viscosity, x;

        viscosity = 0.0625;

        canvas = document.getElementById("canvas");
        ctx    = canvas.getContext("2d");
        id     = ctx.getImageData(0, 0, canvas.width, canvas.height);

        r = Math.min(id.width, id.height) / 3.0;
        n = Math.ceil(2.0 * Math.PI * r);

        for(i = n; i--; ) {
          x = (i + 0.5) / n;
          t = 2.0 * Math.PI * x;

          paint(
            id,
            id.width  * 0.5 + Math.cos(t) * r,
            id.height * 0.5 + Math.sin(t) * r,
            (0.75 * x + 0.25) * 0.25 * r,
            t * r * viscosity
          );
        }

        ctx.putImageData(id, 0, 0);
      })();
    </script>
  </body>
</html>
